import{r as E}from"./react-Bt3bhBdA.js";import{p as T}from"./prop-types-BKNjMPK8.js";var a={};Object.defineProperty(a,"__esModule",{value:!0});var k=a.Detector=a.Offline=a.Online=void 0,g=function(){function n(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),p=E,D=T,l=j(D);function j(n){return n&&n.__esModule?n:{default:n}}function A(n){if(Array.isArray(n)){for(var e=0,t=Array(n.length);e<n.length;e++)t[e]=n[e];return t}else return Array.from(n)}function c(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function h(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:n}function d(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}var m=typeof navigator<"u",L=/Windows.*Chrome|Windows.*Firefox|Linux.*Chrome/,x=function(e){var t=e.url,r=e.timeout;return new Promise(function(i){var f=function(){return i(!0)},u=function(){return i(!1)},o=new XMLHttpRequest;o.onerror=u,o.ontimeout=u,o.onreadystatechange=function(){o.readyState===o.HEADERS_RECEIVED&&(o.status?f():u())},o.open("GET",t),o.timeout=r,o.send()})},v={children:l.default.node,onChange:l.default.func,polling:l.default.oneOfType([l.default.shape({url:l.default.string,interval:l.default.number,timeout:l.default.number}),l.default.bool]),wrapperType:l.default.string},y={polling:!0,wrapperType:"span"},_={enabled:m&&L.test(navigator.userAgent),url:"https://httpbin.org/get",timeout:5e3,interval:5e3},s=function(n){d(e,n);function e(){c(this,e);var t=h(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.state={online:m&&typeof navigator.onLine=="boolean"?navigator.onLine:!0},t.goOnline=t.goOnline.bind(t),t.goOffline=t.goOffline.bind(t),t}return g(e,[{key:"componentDidMount",value:function(){window.addEventListener("online",this.goOnline),window.addEventListener("offline",this.goOffline),this.getPollingConfig().enabled&&this.startPolling()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("online",this.goOnline),window.removeEventListener("offline",this.goOffline),this.pollingId&&this.stopPolling()}},{key:"renderChildren",value:function(){var r=this.props,i=r.children,f=r.wrapperType;return(0,p.isValidElement)(i)?i:i?p.createElement.apply(void 0,[f,{}].concat(A(p.Children.toArray(i)))):null}},{key:"getPollingConfig",value:function(){switch(this.props.polling){case!0:return _;case!1:return{enabled:!1};default:return Object.assign({},_,this.props.polling)}}},{key:"goOnline",value:function(){this.state.online||(this.callOnChangeHandler(!0),this.setState({online:!0}))}},{key:"goOffline",value:function(){this.state.online&&(this.callOnChangeHandler(!1),this.setState({online:!1}))}},{key:"callOnChangeHandler",value:function(r){this.props.onChange&&this.props.onChange(r)}},{key:"startPolling",value:function(){var r=this,i=this.getPollingConfig(),f=i.interval;this.pollingId=setInterval(function(){var u=r.getPollingConfig(),o=u.url,O=u.timeout;x({url:o,timeout:O}).then(function(C){C?r.goOnline():r.goOffline()})},f)}},{key:"stopPolling",value:function(){clearInterval(this.pollingId)}}]),e}(p.Component);s.propTypes=v;s.defaultProps=y;var b=a.Online=function(n){d(e,n);function e(){return c(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return g(e,[{key:"render",value:function(){return this.state.online?this.renderChildren():null}}]),e}(s);b.propTypes=v;b.defaultProps=y;var P=a.Offline=function(n){d(e,n);function e(){return c(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return g(e,[{key:"render",value:function(){return this.state.online?null:this.renderChildren()}}]),e}(s);P.propTypes=v;P.defaultProps=y;var w=k=a.Detector=function(n){d(e,n);function e(){return c(this,e),h(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return g(e,[{key:"render",value:function(){return this.props.render({online:this.state.online})}}]),e}(s);w.propTypes=Object.assign({},v,{render:l.default.func.isRequired});w.defaultProps=y;export{k as D};
